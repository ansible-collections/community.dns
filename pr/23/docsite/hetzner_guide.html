<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hetzner DNS Guide &mdash; Ansible collections  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="../_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/images/Ansible-Mark-RGB_Black.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HostTech DNS Guide" href="hosttech_guide.html" />
    <link rel="prev" title="Community.Dns Filter Guide" href="filter_guide.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->




</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Ansible Collections Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Ansible collections
          </a><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <label class="sr-only" for="q">Search docs:</label>
    <input type="text" class="st-default-search-input" id="q" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="filter_guide.html">Community.Dns Filter Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Hetzner DNS Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-community-dns-hetzner-module-defaults-group">Using the <code class="docutils literal notranslate"><span class="pre">community.dns.hetzner</span></code> module defaults group</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-dns-zones">Working with DNS zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-dns-records">Working with DNS records</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#querying-dns-records-and-record-sets">Querying DNS records and record sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-and-updating-dns-single-records">Creating and updating DNS single records</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-and-updating-dns-record-sets">Creating and updating DNS record sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bulk-synchronization-of-dns-record-sets">Bulk synchronization of DNS record sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#migrating-from-markuman-hetzner-dns">Migrating from <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-markuman-hetzner-dns-record-module">The markuman.hetzner_dns.record module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-markuman-hetzner-dns-record-info-module">The markuman.hetzner_dns.record_info module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-markuman-hetzner-dns-zone-info-module">The markuman.hetzner_dns.zone_info module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-markuman-hetzner-dns-inventory-inventory-plugin">The markuman.hetzner_dns.inventory inventory plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hosttech_guide.html">HostTech DNS Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_public_suffix_filter.html">community.dns.get_public_suffix filter – Returns the public suffix of a DNS name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_registrable_domain_filter.html">community.dns.get_registrable_domain filter – Returns the registrable domain name of a DNS name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remove_public_suffix_filter.html">community.dns.remove_public_suffix filter – Removes the public suffix from a DNS name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remove_registrable_domain_filter.html">community.dns.remove_registrable_domain filter – Removes the registrable domain name from a DNS name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_records_inventory.html">community.dns.hetzner_dns_records inventory – Create inventory from Hetzner DNS records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_records_inventory.html">community.dns.hosttech_dns_records inventory – Create inventory from Hosttech DNS records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_record_module.html">community.dns.hetzner_dns_record module – Add or delete a single record in Hetzner DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_record_info_module.html">community.dns.hetzner_dns_record_info module – Retrieve records in Hetzner DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_record_set_module.html">community.dns.hetzner_dns_record_set module – Add or delete record sets in Hetzner DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_record_set_info_module.html">community.dns.hetzner_dns_record_set_info module – Retrieve record sets in Hetzner DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_record_sets_module.html">community.dns.hetzner_dns_record_sets module – Bulk synchronize DNS record sets in Hetzner DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hetzner_dns_zone_info_module.html">community.dns.hetzner_dns_zone_info module – Retrieve zone information in Hetzner DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_record_module.html">community.dns.hosttech_dns_record module – Add or delete a single record in Hosttech DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_record_info_module.html">community.dns.hosttech_dns_record_info module – Retrieve records in Hosttech DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_record_set_module.html">community.dns.hosttech_dns_record_set module – Add or delete record sets in Hosttech DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_record_set_info_module.html">community.dns.hosttech_dns_record_set_info module – Retrieve record sets in Hosttech DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_record_sets_module.html">community.dns.hosttech_dns_record_sets module – Bulk synchronize DNS record sets in Hosttech DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosttech_dns_zone_info_module.html">community.dns.hosttech_dns_zone_info module – Retrieve zone information in Hosttech DNS service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wait_for_txt_module.html">community.dns.wait_for_txt module – Wait for TXT entries to be available on all authoritative nameservers</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible collections</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Hetzner DNS Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

  
           <div itemprop="articleBody">
             
  <section id="hetzner-dns-guide">
<span id="ansible-collections-community-dns-docsite-hetzner-guide"></span><h1>Hetzner DNS Guide<a class="headerlink" href="#hetzner-dns-guide" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#authentication" id="id3">Authentication</a></p>
<ul>
<li><p><a class="reference internal" href="#using-the-community-dns-hetzner-module-defaults-group" id="id4">Using the <code class="docutils literal notranslate"><span class="pre">community.dns.hetzner</span></code> module defaults group</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#working-with-dns-zones" id="id5">Working with DNS zones</a></p></li>
<li><p><a class="reference internal" href="#working-with-dns-records" id="id6">Working with DNS records</a></p>
<ul>
<li><p><a class="reference internal" href="#querying-dns-records-and-record-sets" id="id7">Querying DNS records and record sets</a></p></li>
<li><p><a class="reference internal" href="#creating-and-updating-dns-single-records" id="id8">Creating and updating DNS single records</a></p></li>
<li><p><a class="reference internal" href="#creating-and-updating-dns-record-sets" id="id9">Creating and updating DNS record sets</a></p></li>
<li><p><a class="reference internal" href="#bulk-synchronization-of-dns-record-sets" id="id10">Bulk synchronization of DNS record sets</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#migrating-from-markuman-hetzner-dns" id="id11">Migrating from <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns</span></code></a></p>
<ul>
<li><p><a class="reference internal" href="#the-markuman-hetzner-dns-record-module" id="id12">The markuman.hetzner_dns.record module</a></p></li>
<li><p><a class="reference internal" href="#the-markuman-hetzner-dns-record-info-module" id="id13">The markuman.hetzner_dns.record_info module</a></p></li>
<li><p><a class="reference internal" href="#the-markuman-hetzner-dns-zone-info-module" id="id14">The markuman.hetzner_dns.zone_info module</a></p></li>
<li><p><a class="reference internal" href="#the-markuman-hetzner-dns-inventory-inventory-plugin" id="id15">The markuman.hetzner_dns.inventory inventory plugin</a></p></li>
</ul>
</li>
</ul>
</div>
<p>The <a class="reference internal" href="../index.html#plugins-in-community-dns"><span class="std std-ref">community.dns collection</span></a> offers several modules for working with the <a class="reference external" href="https://docs.hetzner.com/dns-console/dns/">Hetzner DNS service</a>.
The modules use the <a class="reference external" href="https://dns.hetzner.com/api-docs/">JSON REST based API</a>.</p>
<p>The collection provides six modules for working with Hetzner DNS:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../hetzner_dns_record_module.html#ansible-collections-community-dns-hetzner-dns-record-module"><span class="std std-ref">community.dns.hetzner_dns_record</span></a>: create/update/delete single DNS records</p></li>
<li><p><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module"><span class="std std-ref">community.dns.hetzner_dns_record_info</span></a>: retrieve information on DNS records</p></li>
<li><p><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module"><span class="std std-ref">community.dns.hetzner_dns_record_set</span></a>: create/update/delete DNS record sets</p></li>
<li><p><a class="reference internal" href="../hetzner_dns_record_set_info_module.html#ansible-collections-community-dns-hetzner-dns-record-set-info-module"><span class="std std-ref">community.dns.hetzner_dns_record_set_info</span></a>: retrieve information on DNS record sets</p></li>
<li><p><a class="reference internal" href="../hetzner_dns_record_sets_module.html#ansible-collections-community-dns-hetzner-dns-record-sets-module"><span class="std std-ref">community.dns.hetzner_dns_record_sets</span></a>: bulk synchronize DNS record sets</p></li>
<li><p><a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module"><span class="std std-ref">community.dns.hetzner_dns_zone_info</span></a>: retrieve zone information</p></li>
</ul>
<p>If you are interested in migrating from the <a class="reference external" href="https://galaxy.ansible.com/markuman/hetzner_dns">markuman.hetzner_dns collection</a>, please see <a class="reference internal" href="#ansible-collections-community-dns-docsite-hetzner-guide-migration-markuman-hetzner-dns"><span class="std std-ref">Migrating from markuman.hetzner_dns</span></a>.</p>
<p>It also provides an inventory plugin:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../hetzner_dns_records_inventory.html#ansible-collections-community-dns-hetzner-dns-records-inventory"><span class="std std-ref">community.dns.hetzner_dns_records</span></a>: create inventory from DNS records</p></li>
</ul>
<section id="authentication">
<h2><a class="toc-backref" href="#id3">Authentication</a><a class="headerlink" href="#authentication" title="Permalink to this heading"></a></h2>
<p>To use Hetzner’s API, you need to create an API token. You can manage API tokens in the “API tokens” menu entry in your user menu in the <a class="reference external" href="https://dns.hetzner.com/">DNS Console</a>. You must provide the token to the <code class="ansible-option docutils literal notranslate"><strong><span class="pre">hetzner_token</span></strong></code> option of the modules, its alias <code class="ansible-option docutils literal notranslate"><strong><span class="pre">api_token</span></strong></code>, or pass it on in the <span class="target" id="index-0"></span><a class="reference internal" href="../environment_variables.html#envvar-HETZNER_DNS_TOKEN"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HETZNER_DNS_TOKEN</span></code></a> environment variable:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">community.dns.hetzner_dns_record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">hetzner_token</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">token</span> <span class="cp">}}</span><span class="s">&#39;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</pre></div>
</div>
<p>In the examples in this guide, we will leave the authentication options away. Please note that you can set them globally with <code class="docutils literal notranslate"><span class="pre">module_defaults</span></code> (see <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span>Module defaults</span></a>) or with an environment variable for the user and machine where the modules are run on.</p>
<section id="using-the-community-dns-hetzner-module-defaults-group">
<h3><a class="toc-backref" href="#id4">Using the <code class="docutils literal notranslate"><span class="pre">community.dns.hetzner</span></code> module defaults group</a><a class="headerlink" href="#using-the-community-dns-hetzner-module-defaults-group" title="Permalink to this heading"></a></h3>
<p>To avoid having to specify common parameters for all Hetzner DNS modules in every task, you can use the <code class="docutils literal notranslate"><span class="pre">community.dns.hetzner</span></code> module defaults group:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hetzner DNS</span><span class="w"></span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">  </span><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">group/community.dns.hetzner</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">hetzner_token</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">token</span> <span class="cp">}}</span><span class="s">&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query zone information</span><span class="w"></span>
<span class="w">      </span><span class="nt">community.dns.hetzner_dns_zone_info</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set A records for www.example.com</span><span class="w"></span>
<span class="w">      </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<span class="w">        </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">        </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.1</span><span class="w"></span>
</pre></div>
</div>
<p>Here all two tasks will use the options set for the module defaults group.</p>
</section>
</section>
<section id="working-with-dns-zones">
<h2><a class="toc-backref" href="#id5">Working with DNS zones</a><a class="headerlink" href="#working-with-dns-zones" title="Permalink to this heading"></a></h2>
<p>The <a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module"><span class="std std-ref">community.dns.hetzner_dns_zone_info module</span></a> allows to query information on a zone. The zone can be identified both by its name and by its ID (which is an integer):</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query zone information by name</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_zone_info</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query zone information by ID</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_zone_info</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aBcDeFgHiJlMnOpQrStUvW</span><span class="w"></span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span><span class="w"></span>
</pre></div>
</div>
<p>The module returns both the zone name and zone ID, so this module can be used to convert from zone ID to zone name and vice versa:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ansible.builtin.debug</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">        </span><span class="no">The zone ID: </span><span class="cp">{{</span> <span class="nv">result.zone_id</span> <span class="cp">}}</span><span class="w"></span>
<span class="w">        </span><span class="no">The zone name: </span><span class="cp">{{</span> <span class="nv">result.zone_name</span> <span class="cp">}}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="working-with-dns-records">
<h2><a class="toc-backref" href="#id6">Working with DNS records</a><a class="headerlink" href="#working-with-dns-records" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, TXT record values returned and accepted by the modules and plugins in this collection are unquoted. This means that  you do not have to add double quotes (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>), and escape double quotes (as <code class="docutils literal notranslate"><span class="pre">\&quot;</span></code>) and backslashes (as <code class="docutils literal notranslate"><span class="pre">\\</span></code>). All modules and plugins which work with DNS records support the <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-txt-transformation"><span class="std std-ref"><span class="pre">txt_transformation</span></span></a></strong></code> option which allows to configure this behavior.</p>
</div>
<section id="querying-dns-records-and-record-sets">
<h3><a class="toc-backref" href="#id7">Querying DNS records and record sets</a><a class="headerlink" href="#querying-dns-records-and-record-sets" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="../hetzner_dns_record_set_info_module.html#ansible-collections-community-dns-hetzner-dns-record-set-info-module"><span class="std std-ref">community.dns.hetzner_dns_record_set_info module</span></a> allows to query DNS record sets from the API. It can be used to query a single record set:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query single record</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set_info</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w">  </span><span class="c1"># IPv4 addresses</span><span class="w"></span>
<span class="w">    </span><span class="nt">what</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">single_record</span><span class="w">  </span><span class="c1"># default value</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Either specify a record name:</span><span class="w"></span>
<span class="w">    </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Or a record prefix (&#39;&#39; is the zone itself):</span><span class="w"></span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Show IPv4 addresses if record exists</span><span class="w"></span>
<span class="w">  </span><span class="nt">ansible.builtin.debug</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span><span class="w"></span>
<span class="w">      </span><span class="no">IPv4s are </span><span class="cp">{{</span> <span class="nv">result.set.value</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="no">,</span><span class="w"></span>
<span class="w">      </span><span class="no">TTL is </span><span class="cp">{{</span> <span class="nv">result.set.ttl</span> <span class="cp">}}</span><span class="w"></span>
<span class="w">  </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result.set</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Show that record is not set</span><span class="w"></span>
<span class="w">  </span><span class="nt">ansible.builtin.debug</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">There is no A record for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not result.set</span><span class="w"></span>
</pre></div>
</div>
<p>In all examples in this section, you can replace <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_info_module.html#ansible-collections-community-dns-hetzner-dns-record-set-info-module-parameter-zone-name"><span class="std std-ref"><span class="pre">zone_name=example.com</span></span></a></code> by <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_info_module.html#ansible-collections-community-dns-hetzner-dns-record-set-info-module-parameter-zone-id"><span class="std std-ref"><span class="pre">zone_id=aBcDeFgHiJlMnOpQrStUvW</span></span></a></code> with the zone’s ID string.</p>
<p>You can also query a list of all record sets for a record name or prefix:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query all records for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set_info</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">what</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all_types_for_record</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Either specify a record name:</span><span class="w"></span>
<span class="w">    </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Or a record prefix (&#39;&#39; is the zone itself):</span><span class="w"></span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Show all records for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">ansible.builtin.debug</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span><span class="w"></span>
<span class="w">      </span><span class="cp">{{</span> <span class="nv">item.type</span> <span class="cp">}}</span><span class="w"> </span><span class="no">record with TTL </span><span class="cp">{{</span> <span class="nv">item.ttl</span> <span class="cp">}}</span><span class="no"> has</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">values</span><span class="w"> </span><span class="cp">{{</span> <span class="nv">item.value</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="w"></span>
<span class="w">  </span><span class="nt">loop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result.sets</span><span class="w"></span>
</pre></div>
</div>
<p>Finally you can query all record sets for a zone:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query all records for a zone</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set_info</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">what</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all_records</span><span class="w"></span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Show all records for the example.com zone</span><span class="w"></span>
<span class="w">  </span><span class="nt">ansible.builtin.debug</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span><span class="w"></span>
<span class="w">      </span><span class="cp">{{</span> <span class="nv">item.type</span> <span class="cp">}}</span><span class="w"> </span><span class="no">record for </span><span class="cp">{{</span> <span class="nv">item.record</span> <span class="cp">}}</span><span class="no"> with</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">TTL </span><span class="cp">{{</span> <span class="nv">item.ttl</span> <span class="cp">}}</span><span class="l l-Scalar l-Scalar-Plain"> has values</span><span class="w"> </span><span class="cp">{{</span> <span class="nv">item.value</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="w"></span>
<span class="w">  </span><span class="nt">loop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result.sets</span><span class="w"></span>
</pre></div>
</div>
<p>If you are interested in individual DNS records, and not record sets, you should use the <a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module"><span class="std std-ref">community.dns.hetzner_dns_record_info module</span></a>. It supports the same limiting options as the <code class="docutils literal notranslate"><span class="pre">community.dns.hetzner_dns_record_set_info</span></code> module.</p>
</section>
<section id="creating-and-updating-dns-single-records">
<h3><a class="toc-backref" href="#id8">Creating and updating DNS single records</a><a class="headerlink" href="#creating-and-updating-dns-single-records" title="Permalink to this heading"></a></h3>
<p>If you do not want to add/remove values, but replace values, you will be interested in modifying a <strong>record set</strong> and not a single record. This is in particular important when working with <code class="docutils literal notranslate"><span class="pre">CNAME</span></code> and <code class="docutils literal notranslate"><span class="pre">SOA</span></code> records.</p>
<p>The <a class="reference internal" href="../hetzner_dns_record_module.html#ansible-collections-community-dns-hetzner-dns-record-module"><span class="std std-ref">community.dns.hetzner_dns_record module</span></a> allows to set, update and remove single DNS records. Setting and updating can be done as follows. Records will be matched by record name and type, and the TTL value will be updated if necessary:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Add an A record with value 1.1.1.1 for www.example.com, resp. make sure the TTL is 300</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w">  </span><span class="c1"># IPv4 addresses</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Either specify a record name:</span><span class="w"></span>
<span class="w">    </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Or a record prefix (&#39;&#39; is the zone itself):</span><span class="w"></span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"></span>
</pre></div>
</div>
<p>To delete records, simply use <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_module.html#ansible-collections-community-dns-hetzner-dns-record-module-parameter-state"><span class="std std-ref"><span class="pre">state=absent</span></span></a></code>. Records will be matched by record name and type, and the TTL will be ignored:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove A values for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w">  </span><span class="c1"># IPv4 addresses</span><span class="w"></span>
<span class="w">    </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span><span class="w"></span>
</pre></div>
</div>
<p>Records of the same type for the same record name with other values are ignored.</p>
</section>
<section id="creating-and-updating-dns-record-sets">
<h3><a class="toc-backref" href="#id9">Creating and updating DNS record sets</a><a class="headerlink" href="#creating-and-updating-dns-record-sets" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module"><span class="std std-ref">community.dns.hetzner_dns_record_set module</span></a> allows to set, update and remove DNS record sets. Setting and updating can be done as follows:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Make sure record is set to the given value</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w">  </span><span class="c1"># IPv4 addresses</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Either specify a record name:</span><span class="w"></span>
<span class="w">    </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Or a record prefix (&#39;&#39; is the zone itself):</span><span class="w"></span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.8.8.8</span><span class="w"></span>
</pre></div>
</div>
<p>If you want to assert that a record has a certain value, set <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-on-existing"><span class="std std-ref"><span class="pre">on_existing=keep</span></span></a></code>. Using <code class="ansible-value docutils literal notranslate"><span class="pre">keep_and_warn</span></code> instead will emit a warning if this happens, and <code class="ansible-value docutils literal notranslate"><span class="pre">keep_and_fail</span></code> will make the module fail.</p>
<p>To delete values, you can either overwrite the values with value <code class="ansible-value docutils literal notranslate"><span class="pre">[]</span></code>, or use <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-state"><span class="std std-ref"><span class="pre">state=absent</span></span></a></code>:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove A values for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w">  </span><span class="c1"># IPv4 addresses</span><span class="w"></span>
<span class="w">    </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www.example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove TXT values for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TXT</span><span class="w"></span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove specific AAAA values for www.example.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AAAA</span><span class="w">  </span><span class="c1"># IPv6 addresses</span><span class="w"></span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>
<span class="w">    </span><span class="nt">on_existing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keep_and_fail</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;::1&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>In the third example, <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-on-existing"><span class="std std-ref"><span class="pre">on_existing=keep_and_fail</span></span></a></code> is present and an explicit value and TTL are given. This makes the module remove the current value only if there’s a AAAA record for <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> whose current value is <code class="docutils literal notranslate"><span class="pre">::1</span></code> and whose TTL is 300. If another value is set, the module will not make any change, but fail. This can be useful to not accidentally remove values you do not want to change. To issue a warning instead of failing, use <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-on-existing"><span class="std std-ref"><span class="pre">on_existing=keep_and_warn</span></span></a></code>, and to simply not do a change without any indication of this situation, use <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-on-existing"><span class="std std-ref"><span class="pre">on_existing=keep</span></span></a></code>.</p>
</section>
<section id="bulk-synchronization-of-dns-record-sets">
<h3><a class="toc-backref" href="#id10">Bulk synchronization of DNS record sets</a><a class="headerlink" href="#bulk-synchronization-of-dns-record-sets" title="Permalink to this heading"></a></h3>
<p>If you want to set/update multiple records at once, or even make sure that the precise set of records you are providing are present and nothing else, you can use the <a class="reference internal" href="../hetzner_dns_record_sets_module.html#ansible-collections-community-dns-hetzner-dns-record-sets-module"><span class="std std-ref">community.dns.hetzner_dns_record_sets module</span></a>.</p>
<p>The following example shows up to set/update multiple records at once:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Make sure that multiple records are present</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_sets</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">record_sets</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.8.8.8</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AAAA</span><span class="w"></span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;::1&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>The next example shows how to make sure that only the given records are available and all other records are deleted. Note that for the <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_sets_module.html#ansible-collections-community-dns-hetzner-dns-record-sets-module-parameter-record-sets-type"><span class="std std-ref"><span class="pre">record_sets[].type=NS</span></span></a></code> record we used <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_sets_module.html#ansible-collections-community-dns-hetzner-dns-record-sets-module-parameter-record-sets-ignore"><span class="std std-ref"><span class="pre">record_sets[].ignore=true</span></span></a></code>, which allows us to skip the value. It tells the module that it should not touch the <code class="docutils literal notranslate"><span class="pre">NS</span></code> record for <code class="docutils literal notranslate"><span class="pre">example.com</span></code>.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Make sure that multiple records are present</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_sets</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">prune</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">    </span><span class="nt">record_sets</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1.1.1</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.8.8.8</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">www</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AAAA</span><span class="w"></span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;::1&#39;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NS</span><span class="w"></span>
<span class="w">        </span><span class="nt">ignore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="migrating-from-markuman-hetzner-dns">
<span id="ansible-collections-community-dns-docsite-hetzner-guide-migration-markuman-hetzner-dns"></span><h2><a class="toc-backref" href="#id11">Migrating from <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns</span></code></a><a class="headerlink" href="#migrating-from-markuman-hetzner-dns" title="Permalink to this heading"></a></h2>
<p>This section describes how to migrate playbooks and roles from using the <a class="reference external" href="https://galaxy.ansible.com/markuman/hetzner_dns">markuman.hetzner_dns collection</a> to the Hetzner modules and plugins in the <code class="docutils literal notranslate"><span class="pre">community.dns</span></code> collection.</p>
<p>There are three steps for migrating. Two of these steps must be done on migration, the third step can also be done later:</p>
<ol class="arabic simple">
<li><p>Replace the modules and plugins used by the new ones.</p></li>
<li><p>Adjust module and plugin options if necessary.</p></li>
<li><p>Avoid deprecated aliases which ease the transition.</p></li>
</ol>
<p>The <a class="reference external" href="https://galaxy.ansible.com/markuman/hetzner_dns">markuman.hetzner_dns collection</a> collection provides three modules and one inventory plugin.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When working with TXT records, please look at the <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-txt-transformation"><span class="std std-ref"><span class="pre">txt_transformation</span></span></a></strong></code> option. By default, the modules and plugins in this collection use <strong>unquoted</strong> values (you do not have to add double quotes and escape double quotes and backslashes), while the modules and plugins in <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns</span></code> use partially quoted values. You can switch behavior of the <code class="docutils literal notranslate"><span class="pre">community.dns</span></code> modules by passing <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-txt-transformation"><span class="std std-ref"><span class="pre">txt_transformation=api</span></span></a></code> or <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-txt-transformation"><span class="std std-ref"><span class="pre">txt_transformation=quoted</span></span></a></code>.</p>
</div>
<section id="the-markuman-hetzner-dns-record-module">
<h3><a class="toc-backref" href="#id12">The markuman.hetzner_dns.record module</a><a class="headerlink" href="#the-markuman-hetzner-dns-record-module" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns.zone_info</span></code> module can be replaced by the <a class="reference internal" href="../hetzner_dns_record_module.html#ansible-collections-community-dns-hetzner-dns-record-module"><span class="std std-ref">community.dns.hetzner_dns_record module</span></a> and the <a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module"><span class="std std-ref">community.dns.hetzner_dns_record_set module</span></a>, depending on what it is used for.</p>
<p>When creating, updating or removing single records, the <a class="reference internal" href="../hetzner_dns_record_module.html#ansible-collections-community-dns-hetzner-dns-record-module"><span class="std std-ref">community.dns.hetzner_dns_record module</span></a> should be used. This is the case when <code class="ansible-option-value docutils literal notranslate"><span class="pre">purge=false</span></code> is specified (the default value). Note that <code class="ansible-option docutils literal notranslate"><strong><span class="pre">replace</span></strong></code>, <code class="ansible-option docutils literal notranslate"><strong><span class="pre">overwrite</span></strong></code> and <code class="ansible-option docutils literal notranslate"><strong><span class="pre">solo</span></strong></code> are aliases of <code class="ansible-option docutils literal notranslate"><strong><span class="pre">purge</span></strong></code>.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating and updating DNS records</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Creating or updating a single DNS record with markuman.hetzner_dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">markuman.hetzner_dns.record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w"></span>
<span class="w">    </span><span class="c1"># This means the module operates on single DNS entries. If not specified,</span><span class="w"></span>
<span class="w">    </span><span class="c1"># this is the default value:</span><span class="w"></span>
<span class="w">    </span><span class="nt">purge</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Creating or updating a single DNS record with community.dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;state&#39; must always be specified:</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;name&#39; is a deprecated alias of &#39;prefix&#39;, so it can be</span><span class="w"></span>
<span class="w">    </span><span class="c1"># kept during a first migration step:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;type&#39;, &#39;value&#39; and &#39;ttl&#39; do not change:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w"></span>
<span class="w">    </span><span class="c1"># If type is TXT, you either have to adjust the value you pass,</span><span class="w"></span>
<span class="w">    </span><span class="c1"># or keep the following option:</span><span class="w"></span>
<span class="w">    </span><span class="nt">txt_transformation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span><span class="w"></span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns.record</span></code> module is in replace mode, it should be replaced by the <a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module"><span class="std std-ref">community.dns.hetzner_dns_record_set module</span></a>, since then it operates on the <em>record set</em> and not just on a single record:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating and updating DNS record sets</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Creating or updating a record set with markuman.hetzner_dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">markuman.hetzner_dns.record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w"></span>
<span class="w">    </span><span class="c1"># This means the module operates on the record set:</span><span class="w"></span>
<span class="w">    </span><span class="nt">purge</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Creating or updating a record set with community.dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;state&#39; must always be specified:</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;name&#39; is a deprecated alias of &#39;prefix&#39;, so it can be</span><span class="w"></span>
<span class="w">    </span><span class="c1"># kept during a first migration step:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;type&#39; and &#39;ttl&#39; do not change:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;value&#39; is now a list:</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Ansible allows to specify lists as a comma-separated string.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># So for records which do not contain a comma, you can also</span><span class="w"></span>
<span class="w">    </span><span class="c1"># keep the old syntax, in this case:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#</span><span class="w"></span>
<span class="w">    </span><span class="c1">#     value: 127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="c1">#</span><span class="w"></span>
<span class="w">    </span><span class="c1"># If type is TXT, you either have to adjust the value you pass,</span><span class="w"></span>
<span class="w">    </span><span class="c1"># or keep the following option:</span><span class="w"></span>
<span class="w">    </span><span class="nt">txt_transformation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span><span class="w"></span>
</pre></div>
</div>
<p>When deleting a record, it depends on whether <code class="ansible-option docutils literal notranslate"><strong><span class="pre">value</span></strong></code> is specified or not. If <code class="ansible-option docutils literal notranslate"><strong><span class="pre">value</span></strong></code> is specified, the module is deleting a single DNS record, and the <a class="reference internal" href="../hetzner_dns_record_module.html#ansible-collections-community-dns-hetzner-dns-record-module"><span class="std std-ref">community.dns.hetzner_dns_record module</span></a> should be used:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># Deleting single DNS records</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deleting a single DNS record with markuman.hetzner_dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">markuman.hetzner_dns.record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deleting a single DNS record with community.dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;name&#39; is a deprecated alias of &#39;prefix&#39;, so it can be</span><span class="w"></span>
<span class="w">    </span><span class="c1"># kept during a first migration step:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;type&#39;, &#39;value&#39; and &#39;ttl&#39; do not change:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w"></span>
<span class="w">    </span><span class="c1"># If type is TXT, you either have to adjust the value you pass,</span><span class="w"></span>
<span class="w">    </span><span class="c1"># or keep the following option:</span><span class="w"></span>
<span class="w">    </span><span class="nt">txt_transformation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api</span><span class="w"></span>
</pre></div>
</div>
<p>When <code class="ansible-option docutils literal notranslate"><strong><span class="pre">value</span></strong></code> is not specified, the <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns.record</span></code> module will delete all records for this prefix and type. In that case, it operates on a record set and the <a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module"><span class="std std-ref">community.dns.hetzner_dns_record_set module</span></a> should be used:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># Deleting multiple DNS records</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deleting multiple DNS records with markuman.hetzner_dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">markuman.hetzner_dns.record</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deleting a single DNS record with community.dns</span><span class="w"></span>
<span class="w">  </span><span class="nt">community.dns.hetzner_dns_record_set</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">zone_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;name&#39; is a deprecated alias of &#39;prefix&#39;, so it can be</span><span class="w"></span>
<span class="w">    </span><span class="c1"># kept during a first migration step:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">    </span><span class="c1"># &#39;type&#39; does not change:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span><span class="w"></span>
</pre></div>
</div>
<p>A last step is replacing the deprecated alias <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-name"><span class="std std-ref"><span class="pre">name</span></span></a></strong></code> of <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-prefix"><span class="std std-ref"><span class="pre">prefix</span></span></a></strong></code> by <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_set_module.html#ansible-collections-community-dns-hetzner-dns-record-set-module-parameter-prefix"><span class="std std-ref"><span class="pre">prefix</span></span></a></strong></code>. This can be done later though, if you do not mind the deprecation warnings.</p>
</section>
<section id="the-markuman-hetzner-dns-record-info-module">
<h3><a class="toc-backref" href="#id13">The markuman.hetzner_dns.record_info module</a><a class="headerlink" href="#the-markuman-hetzner-dns-record-info-module" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns.record_info</span></code> module can be replaced by the <a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module"><span class="std std-ref">community.dns.hetzner_dns_record_info module</span></a>. The main difference is that instead of by the <code class="ansible-option docutils literal notranslate"><strong><span class="pre">filters</span></strong></code> option, the output is controlled by the <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module-parameter-what"><span class="std std-ref"><span class="pre">what</span></span></a></strong></code> option (choices <code class="ansible-value docutils literal notranslate"><span class="pre">single_record</span></code>, <code class="ansible-value docutils literal notranslate"><span class="pre">all_types_for_record</span></code>, and <code class="ansible-value docutils literal notranslate"><span class="pre">all_records</span></code>), the <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module-parameter-type"><span class="std std-ref"><span class="pre">type</span></span></a></strong></code> option (needed when <code class="ansible-option-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module-parameter-what"><span class="std std-ref"><span class="pre">what=single_record</span></span></a></code>), and the <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module-parameter-record"><span class="std std-ref"><span class="pre">record</span></span></a></strong></code> and <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module-parameter-prefix"><span class="std std-ref"><span class="pre">prefix</span></span></a></strong></code> options (needed when <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_record_info_module.html#ansible-collections-community-dns-hetzner-dns-record-info-module-parameter-what"><span class="std std-ref"><span class="pre">what</span></span></a></strong></code> is not <code class="ansible-value docutils literal notranslate"><span class="pre">all_records</span></code>).</p>
</section>
<section id="the-markuman-hetzner-dns-zone-info-module">
<h3><a class="toc-backref" href="#id14">The markuman.hetzner_dns.zone_info module</a><a class="headerlink" href="#the-markuman-hetzner-dns-zone-info-module" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns.zone_info</span></code> module can be replaced by the <a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module"><span class="std std-ref">community.dns.hetzner_dns_zone_info module</span></a>. The main differences are:</p>
<ol class="arabic simple">
<li><p>The parameter <code class="ansible-option docutils literal notranslate"><strong><span class="pre">name</span></strong></code> must be changed to <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module-parameter-zone-name"><span class="std std-ref"><span class="pre">zone_name</span></span></a></strong></code> or <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module-parameter-zone"><span class="std std-ref"><span class="pre">zone</span></span></a></strong></code>.</p></li>
<li><p>The return value <code class="ansible-return-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module-return-zone-info"><span class="std std-ref"><span class="pre">zone_info</span></span></a></code> no longer has the <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">id</span></code> entries. Use the return values <code class="ansible-return-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module-return-zone-name"><span class="std std-ref"><span class="pre">zone_name</span></span></a></code> and <code class="ansible-return-value docutils literal notranslate"><a class="reference internal" href="../hetzner_dns_zone_info_module.html#ansible-collections-community-dns-hetzner-dns-zone-info-module-return-zone-id"><span class="std std-ref"><span class="pre">zone_id</span></span></a></code> instead.</p></li>
</ol>
</section>
<section id="the-markuman-hetzner-dns-inventory-inventory-plugin">
<h3><a class="toc-backref" href="#id15">The markuman.hetzner_dns.inventory inventory plugin</a><a class="headerlink" href="#the-markuman-hetzner-dns-inventory-inventory-plugin" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">markuman.hetzner_dns.inventory</span></code> inventory plugin can be replaced by the <a class="reference internal" href="../hetzner_dns_records_inventory.html#ansible-collections-community-dns-hetzner-dns-records-inventory"><span class="std std-ref">community.dns.hetzner_dns_records inventory plugin</span></a>. Besides the plugin name, no change should be necessary.</p>
</section>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="filter_guide.html" class="btn btn-neutral float-left" title="Community.Dns Filter Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hosttech_guide.html" class="btn btn-neutral float-right" title="HostTech DNS Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ansible contributors.</p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->

</body>
</html>