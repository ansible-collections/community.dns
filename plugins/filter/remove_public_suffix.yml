DOCUMENTATION:
  name: remove_public_suffix
  short_description: Removes the public suffix from a DNS name
  version_added: 0.1.0
  description:
    - Removes the public suffix from a DNS name.
  options:
    _input:
      description:
        - A DNS name.
      type: string
      required: true
    keep_trailing_period:
      description:
        - This controls whether the trailing period of the prefix (that is, the part before
          the public suffix) is preserved or not.
      type: boolean
      default: false
    keep_unknown_suffix:
      description:
        - This treats unknown TLDs as valid public suffixes. So for example the public suffix
          of C(example.tlddoesnotexist) is C(.tlddoesnotexist) if this is C(true). If set to
          C(false), it will return an empty string in this case.
        - This option corresponds to whether the global wildcard rule C(*) in the Public
          Suffix List is used or not.
      type: boolean
      default: true
    icann_only:
      description:
        - This controls whether only entries from the ICANN section of the Public Suffix List are
          used, or also entries from the Private section. For example, C(.co.uk) is in the ICANN
          section, but C(github.io) is in the Private section.
      type: boolean
      default: false
  author:
    - Felix Fontein (@felixfontein)

EXAMPLES: |
  - name: Remove the public suffix from a DNS name
    ansible.builtin.set_fact:
      public_suffix: "{{ 'www.ansible.co.uk' | community.dns.remove_public_suffix }}"
      # Should result in 'www.ansible'

RETURN:
  _value:
    description: The part of the DNS name before the public suffix.
    type: string
